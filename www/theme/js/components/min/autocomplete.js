$.fn.AutoComplete=function(a){var b=$(this);a=$.extend({url:"",prepareItem:function(){return""},onSelect:function(){},noItemsHtml:""},a);var c=$('<div class="autocomplete-list" style="display: none"></div>');$("body").append(c);var d=null,e=function(){var d=b.val();d.length<2||(c.css({top:b.offset().top+b.outerHeight()+2+"px",left:b.offset().left+"px",width:b.outerWidth()+"px",position:"absolute"}),$.get(a.url+d,function(e){var f=$("<ul></ul>"),g=0;for(var h in e){if(++g>3)break;var i=$('<li data-object="'+h+'">'+a.prepareItem(e[h],d)+"</li>");f.append(i)}var j=f.find("li").length?"<ul>"+f.html()+"</ul>":a.noItemsHtml;c.show().html(j),c.find("li").click(function(){return b.val(a.onSelect(e[$(this).data("object")])),c.hide(),!1})}))};b.keyup(function(){window.clearTimeout(d),$(this).val().length<2&&c.hide(),d=window.setTimeout(function(){e()},100)}),$(document).click(function(a){0===$(a.target).parents(".autocomplete-list").length&&c.hide()})};